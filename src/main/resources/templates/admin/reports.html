<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Financial Reports - PocketBank Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f5f7fa;
        font-family: "Segoe UI";
      }
      .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }
      .card {
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .report-card {
        padding: 30px;
        text-align: center;
        border-radius: 12px;
        color: white;
      }
      .report-card h2 {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
      <div class="container-fluid main-container">
        <a class="navbar-brand" href="/admin/dashboard"
          ><i class="bi bi-bank2"></i> PocketBank Admin</a
        >
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="/admin/dashboard">Dashboard</a>
          <a class="nav-link active" href="/admin/reports">Reports</a>
        </div>
      </div>
    </nav>

    <div class="main-container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="bi bi-bar-chart"></i> Financial Reports</h2>
        <button class="btn btn-primary" onclick="window.print()">
          <i class="bi bi-printer"></i> Print Report
        </button>
      </div>

      <!-- Customer Statistics -->
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5><i class="bi bi-people"></i> Customer Statistics</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <div
                class="report-card"
                style="background: linear-gradient(135deg, #667eea, #764ba2)"
              >
                <i class="bi bi-people" style="font-size: 2rem"></i>
                <h2 th:text="${totalCustomers}">0</h2>
                <p>Total Customers</p>
              </div>
            </div>
            <div class="col-md-4">
              <div
                class="report-card"
                style="background: linear-gradient(135deg, #f093fb, #f5576c)"
              >
                <i class="bi bi-wallet2" style="font-size: 2rem"></i>
                <h2 th:text="${totalAccounts}">0</h2>
                <p>Total Accounts</p>
              </div>
            </div>
            <div class="col-md-4">
              <div
                class="report-card"
                style="background: linear-gradient(135deg, #4facfe, #00f2fe)"
              >
                <i class="bi bi-arrow-repeat" style="font-size: 2rem"></i>
                <h2 th:text="${totalTransactions}">0</h2>
                <p>Total Transactions</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Financial Summary -->
      <div class="card">
        <div class="card-header bg-success text-white">
          <h5><i class="bi bi-cash-stack"></i> Financial Summary</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered">
              <tr>
                <td>
                  <strong
                    ><i class="bi bi-arrow-down-circle text-success"></i> Total
                    Deposits</strong
                  >
                </td>
                <td class="text-end text-success">
                  <h4
                    th:text="'₹' + ${#numbers.formatDecimal(totalDeposits, 0, 'COMMA', 2, 'POINT')}"
                  ></h4>
                </td>
              </tr>
              <tr>
                <td>
                  <strong
                    ><i class="bi bi-arrow-up-circle text-danger"></i> Total
                    Withdrawals</strong
                  >
                </td>
                <td class="text-end text-danger">
                  <h4
                    th:text="'₹' + ${#numbers.formatDecimal(totalWithdrawals, 0, 'COMMA', 2, 'POINT')}"
                  ></h4>
                </td>
              </tr>
              <tr>
                <td>
                  <strong
                    ><i class="bi bi-calculator text-primary"></i> Net Cash
                    Flow</strong
                  >
                </td>
                <td class="text-end text-primary">
                  <h4
                    th:text="'₹' + ${#numbers.formatDecimal(totalDeposits - totalWithdrawals, 0, 'COMMA', 2, 'POINT')}"
                  ></h4>
                </td>
              </tr>
              <tr class="table-active">
                <td>
                  <strong
                    ><i class="bi bi-bank2 text-info"></i> Total Bank
                    Balance</strong
                  >
                </td>
                <td class="text-end text-info">
                  <h3
                    th:text="'₹' + ${#numbers.formatDecimal(totalBalance, 0, 'COMMA', 2, 'POINT')}"
                  ></h3>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <!-- Activity Summary -->
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-info text-white">
              <h5><i class="bi bi-graph-up"></i> Key Metrics</h5>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between">
                  <span>Average Balance per Account:</span>
                  <strong
                    th:if="${totalAccounts > 0}"
                    th:text="'₹' + ${#numbers.formatDecimal(totalBalance / totalAccounts, 0, 'COMMA', 2, 'POINT')}"
                  ></strong>
                  <strong th:if="${totalAccounts == 0}">₹0.00</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Transactions per Customer:</span>
                  <strong
                    th:if="${totalCustomers > 0}"
                    th:text="${#numbers.formatDecimal(totalTransactions / totalCustomers, 0, 'DEFAULT', 2, 'POINT')}"
                  ></strong>
                  <strong th:if="${totalCustomers == 0}">0</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Accounts per Customer:</span>
                  <strong
                    th:if="${totalCustomers > 0}"
                    th:text="${#numbers.formatDecimal(totalAccounts / totalCustomers, 0, 'DEFAULT', 2, 'POINT')}"
                  ></strong>
                  <strong th:if="${totalCustomers == 0}">0</strong>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-warning">
              <h5><i class="bi bi-info-circle"></i> System Health</h5>
            </div>
            <div class="card-body">
              <div class="alert alert-success">
                <i class="bi bi-check-circle"></i> All systems operational
              </div>
              <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> Database: Connected
              </div>
              <div class="alert alert-info">
                <i class="bi bi-shield-check"></i> Security: Active
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Report Footer -->
      <div class="card mt-4">
        <div class="card-body text-center">
          <p class="mb-0 text-muted">
            <i class="bi bi-calendar"></i> Report generated on:
            <strong
              th:text="${#temporals.format(#temporals.createNow(), 'dd-MM-yyyy HH:mm:ss')}"
            ></strong>
          </p>
          <p class="mb-0 text-muted">
            PocketBank Admin Dashboard - Confidential
          </p>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
