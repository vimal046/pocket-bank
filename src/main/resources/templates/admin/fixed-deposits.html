<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Fixed Deposits - PocketBank Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f5f7fa;
        font-family: "Segoe UI";
      }
      .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }
      .card {
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
      <div class="container-fluid main-container">
        <a class="navbar-brand" href="/admin/dashboard"
          ><i class="bi bi-bank2"></i> PocketBank Admin</a
        >
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="/admin/dashboard">Dashboard</a>
          <a class="nav-link" href="/admin/users">Users</a>
          <a class="nav-link active" href="/admin/fixed-deposits"
            >Fixed Deposits</a
          >
        </div>
      </div>
    </nav>

    <div class="main-container mt-4">
      <h2 class="mb-4"><i class="bi bi-piggy-bank"></i> All Fixed Deposits</h2>

      <div class="card">
        <div class="card-body">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Customer</th>
                <th>Principal Amount</th>
                <th>Tenure</th>
                <th>Interest Rate</th>
                <th>Maturity Amount</th>
                <th>Returns</th>
                <th>Status</th>
                <th>Start Date</th>
                <th>Maturity Date</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="fd : ${fixedDeposits}">
                <td th:text="${fd.id}"></td>
                <td th:text="${fd.user.fullName}"></td>
                <td
                  th:text="'₹' + ${#numbers.formatDecimal(fd.principalAmount, 0, 'COMMA', 2, 'POINT')}"
                ></td>
                <td th:text="${fd.tenureMonths} + ' months'"></td>
                <td th:text="${fd.interestRate} + '%'"></td>
                <td
                  th:text="'₹' + ${#numbers.formatDecimal(fd.maturityAmount, 0, 'COMMA', 2, 'POINT')}"
                ></td>
                <td class="text-success">
                  <strong
                    th:text="'₹' + ${#numbers.formatDecimal(fd.maturityAmount - fd.principalAmount, 0, 'COMMA', 2, 'POINT')}"
                  ></strong>
                </td>
                <td>
                  <span
                    class="badge"
                    th:classappend="${fd.status == 'ACTIVE' ? 'bg-success' : fd.status == 'MATURED' ? 'bg-info' : 'bg-secondary'}"
                    th:text="${fd.status}"
                  >
                  </span>
                </td>
                <td
                  th:text="${#temporals.format(fd.startDate, 'dd-MM-yyyy')}"
                ></td>
                <td
                  th:text="${#temporals.format(fd.maturityDate, 'dd-MM-yyyy')}"
                ></td>
              </tr>
            </tbody>
          </table>

          <div
            th:if="${fixedDeposits.empty}"
            class="text-center text-muted py-5"
          >
            <i class="bi bi-inbox" style="font-size: 3rem"></i>
            <p>No fixed deposits yet</p>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
