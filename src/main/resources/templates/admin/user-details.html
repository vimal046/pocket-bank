<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>User Details - PocketBank Admin</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet" />
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
	rel="stylesheet" />
<style>
body {
	background: #f5f7fa;
	font-family: "Segoe UI";
}

.main-container {
	max-width: 1400px;
	margin: 0 auto;
	padding: 20px;
}

.card {
	border-radius: 12px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	margin-bottom: 20px;
}

.info-card {
	background: linear-gradient(135deg, #667eea, #764ba2);
	color: white;
}
</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg bg-dark navbar-dark">
		<div class="container-fluid main-container">
			<a class="navbar-brand" href="/admin/dashboard"><i
				class="bi bi-bank2"></i> PocketBank Admin</a>
			<div class="navbar-nav ms-auto">
				<a class="nav-link" href="/admin/dashboard">Dashboard</a> <a
					class="nav-link" href="/admin/users">Users</a>
			</div>
		</div>
	</nav>

	<div class="main-container mt-4">
		<a href="/admin/users" class="btn btn-outline-secondary mb-3"> <i
			class="bi bi-arrow-left"></i> Back to Users
		</a>

		<h2 class="mb-4">
			<i class="bi bi-person-circle"></i> User Details
		</h2>

		<!-- User Information Card -->
		<div class="card info-card">
			<div class="card-body">
				<div class="row">
					<div class="col-md-6">
						<h4>
							<i class="bi bi-person"></i> <span th:text="${user.fullName}"></span>
						</h4>
						<p class="mb-1">
							<i class="bi bi-at"></i> <span th:text="${user.email}"></span>
						</p>
						<p class="mb-1">
							<i class="bi bi-phone"></i> <span th:text="${user.phoneNumber}"></span>
						</p>
						<p class="mb-1">
							<i class="bi bi-geo-alt"></i> <span th:text="${user.address}"></span>
						</p>
					</div>
					<div class="col-md-6 text-end">
						<p>
							<strong>Username:</strong> <span th:text="${user.username}"></span>
						</p>
						<p>
							<strong>Role:</strong> <span class="badge bg-light text-dark"
								th:text="${user.role}"></span>
						</p>
						<p>
							<strong>Registered:</strong> <span
								th:text="${#temporals.format(user.createdAt, 'dd-MM-yyyy')}"></span>
						</p>
						<p>
							<strong>Status:</strong> <span class="badge"
								th:classappend="${user.enabled ? 'bg-success' : 'bg-danger'}"
								th:text="${user.enabled ? 'Active' : 'Inactive'}"> </span>
						</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Accounts Section -->
		<div class="card">
			<div class="card-header">
				<h5>
					<i class="bi bi-wallet2"></i> Accounts (<span
						th:text="${accounts.size()}"></span>)
				</h5>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-4" th:each="account : ${accounts}">
						<div class="card mb-3">
							<div class="card-body">
								<h6 th:text="${account.accountType}"></h6>
								<p class="mb-1 text-muted" th:text="${account.accountNumber}"></p>
								<h4
									th:text="'₹' + ${#numbers.formatDecimal(account.balance, 0, 'COMMA', 2, 'POINT')}"></h4>
								<span class="badge" th:with="status=${account.status.name()}"
									th:classappend="${status == 'APPROVED' 
                   ? ' bg-success' 
                   : status == 'PENDING' 
                     ? ' bg-warning' 
                     : ' bg-danger'}"
									th:text="${status}"> </span>

							</div>
						</div>
					</div>
				</div>
				<div th:if="${accounts.empty}" class="text-center text-muted py-4">
					<i class="bi bi-inbox"></i> No accounts yet
				</div>
			</div>
		</div>

		<!-- Loans Section -->
		<div class="card">
			<div class="card-header">
				<h5>
					<i class="bi bi-cash-stack"></i> Loans (<span
						th:text="${loans.size()}"></span>)
				</h5>
			</div>
			<div class="card-body">
				<table class="table" th:if="${!loans.empty}">
					<thead>
						<tr>
							<th>Amount</th>
							<th>Tenure</th>
							<th>Interest Rate</th>
							<th>Monthly EMI</th>
							<th>Status</th>
							<th>Applied Date</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="loan : ${loans}">
							<td
								th:text="'₹' + ${#numbers.formatDecimal(loan.loanAmount, 0, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${loan.tenureMonths} + ' months'"></td>
							<td th:text="${loan.interestRate} + '%'"></td>
							<td
								th:text="'₹' + ${#numbers.formatDecimal(loan.monthlyEmi, 0, 'COMMA', 2, 'POINT')}"></td>
							<td><span class="badge"
								th:classappend="${loan.status.name() == 'APPROVED' or loan.status.name() == 'DISBURSED'
          ? 'bg-success'
          : loan.status.name() == 'PENDING'
          ? 'bg-warning'
          : 'bg-danger'}"
								th:text="${loan.status}"> </span></td>
							<td th:text="${#temporals.format(loan.appliedAt, 'dd-MM-yyyy')}"></td>
						</tr>
					</tbody>
				</table>
				<div th:if="${loans.empty}" class="text-center text-muted py-4">
					<i class="bi bi-inbox"></i> No loans yet
				</div>
			</div>
		</div>

		<!-- Fixed Deposits Section -->
		<div class="card">
			<div class="card-header">
				<h5>
					<i class="bi bi-piggy-bank"></i> Fixed Deposits (<span
						th:text="${fixedDeposits.size()}"></span>)
				</h5>
			</div>
			<div class="card-body">
				<table class="table" th:if="${!fixedDeposits.empty}">
					<thead>
						<tr>
							<th>Principal</th>
							<th>Tenure</th>
							<th>Interest Rate</th>
							<th>Maturity Amount</th>
							<th>Status</th>
							<th>Maturity Date</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="fd : ${fixedDeposits}">
							<td
								th:text="'₹' + ${#numbers.formatDecimal(fd.principalAmount, 0, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${fd.tenureMonths} + ' months'"></td>
							<td th:text="${fd.interestRate} + '%'"></td>
							<td
								th:text="'₹' + ${#numbers.formatDecimal(fd.maturityAmount, 0, 'COMMA', 2, 'POINT')}"></td>
							<td><span class="badge"
								th:classappend="${fd.status == 'ACTIVE' ? 'bg-success' : fd.status == 'MATURED' ? 'bg-info' : 'bg-secondary'}"
								th:text="${fd.status}"> </span></td>
							<td th:text="${#temporals.format(fd.maturityDate, 'dd-MM-yyyy')}"></td>
						</tr>
					</tbody>
				</table>
				<div th:if="${fixedDeposits.empty}"
					class="text-center text-muted py-4">
					<i class="bi bi-inbox"></i> No fixed deposits yet
				</div>
			</div>
		</div>
	</div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
