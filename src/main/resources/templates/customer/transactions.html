<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Transaction History - PocketBank</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
	rel="stylesheet">
<style>
body {
	background: #f5f7fa;
	font-family: 'Segoe UI';
}

.main-container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 20px;
}

.card {
	border-radius: 12px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg bg-light">
		<div class="container-fluid main-container">
			<a class="navbar-brand" href=""><i class="bi bi-bank2"></i>
				PocketBank</a>
			<div class="navbar-nav ms-auto">
				<a class="nav-link" href="/customer/dashboard">Dashboard</a>
			</div>
		</div>
	</nav>

	<div class="main-container mt-4">
		<div class="card">
			<div class="card-header">
				<h4>
					<i class="bi bi-clock-history"></i> Transaction History
				</h4>
				<p class="mb-0 text-muted">
					Account: <strong th:text="${account.accountNumber}"></strong>
				</p>
				<p class="mb-0">
					Current Balance: <strong
						th:text="'₹' + ${#numbers.formatDecimal(account.balance, 0, 'COMMA', 2, 'POINT')}"></strong>
				</p>
			</div>
			<div class="card-body">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Date & Time</th>
							<th>Type</th>
							<th>Amount</th>
							<th>Balance After</th>
							<th>Description</th>
							<th>Recipient/Sender</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="txn : ${transactions}">
							<td
								th:text="${#temporals.format(txn.transactionDate, 'dd-MM-yyyy HH:mm:ss')}"></td>
							<td><span class="badge"
								th:classappend="${txn.type.name().equals('DEPOSIT') 
                   or txn.type.name().equals('TRANSFER_IN') 
                   ? ' bg-success' 
                   : ' bg-danger'}"
								th:text="${txn.type}"> </span></td>
							<td
								th:text="'₹' + ${#numbers.formatDecimal(txn.amount, 0, 'COMMA', 2, 'POINT')}"></td>
							<td
								th:text="'₹' + ${#numbers.formatDecimal(txn.balanceAfter, 0, 'COMMA', 2, 'POINT')}"></td>
							<td th:text="${txn.description}"></td>
							<td
								th:text="${txn.recipientAccountNumber != null ? txn.recipientAccountNumber : '-'}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<a href="/customer/accounts" class="btn btn-outline-primary"> <i
			class="bi bi-arrow-left"></i> Back to Accounts
		</a>
	</div>
</body>
</html>